--- a/drivers/spi/spi-bcm2835aux.c	2018-05-10 10:08:38.582825536 +0200
+++ b/drivers/spi/spi-bcm2835aux.c	2018-05-10 10:08:25.330893201 +0200
@@ -484,7 +484,11 @@
 
 	err = devm_request_irq(&pdev->dev, bs->irq,
 			       bcm2835aux_spi_interrupt,
+#ifdef CONFIG_PREEMPT_RT_FULL
+			       IRQF_SHARED | IRQF_NO_THREAD,
+#else
 			       IRQF_SHARED,
+#endif
 			       dev_name(&pdev->dev), master);
 	if (err) {
 		dev_err(&pdev->dev, "could not request IRQ: %d\n", err);
--- a/drivers/tty/serial/8250/8250_bcm2835aux.c	2018-05-10 10:08:52.898752124 +0200
+++ b/drivers/tty/serial/8250/8250_bcm2835aux.c	2018-05-10 10:08:10.918966464 +0200
@@ -66,6 +66,9 @@
 		return ret;
 	}
 	data->uart.port.irq = ret;
+#ifdef CONFIG_PREEMPT_RT_FULL
+  data->uart.port.irqflags = IRQF_NO_THREAD;
+#endif
 
 	/* map the main registers */
 	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
